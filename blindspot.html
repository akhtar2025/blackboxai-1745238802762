<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blind Spot | E-Learning Safety Riding</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-100" onload="checkAuth();">
    <div class="min-h-screen">
        <!-- Header -->
        <header class="bg-white shadow">
            <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 flex justify-between items-center">
                <h1 class="text-3xl font-bold text-gray-900">Blind Spot</h1>
                <a href="dashboard.html" class="text-blue-600 hover:text-blue-800">
                    <i class="fas fa-arrow-left mr-2"></i>Kembali ke Dashboard
                </a>
            </div>
        </header>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
            <!-- Progress Bar -->
            <div class="bg-white shadow rounded-lg p-4 mb-6">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-sm font-medium text-gray-700">Progress Materi</span>
                    <span id="progressText" class="text-sm font-medium text-blue-600">0%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div id="progressBar" class="bg-blue-600 h-2 rounded-full" style="width: 0%"></div>
                </div>
            </div>

            <!-- Content Sections -->
            <div class="bg-white shadow rounded-lg overflow-hidden">
                <!-- Navigation Tabs -->
                <div class="border-b border-gray-200">
                    <nav class="flex -mb-px">
                        <button onclick="showSection('definisi')" class="tab-btn w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm">
                            Definisi
                        </button>
                        <button onclick="showSection('area')" class="tab-btn w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm">
                            Area Blind Spot
                        </button>
                        <button onclick="showSection('teknik')" class="tab-btn w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm">
                            Teknik Mengatasi
                        </button>
                    </nav>
                </div>

                <!-- Definisi Section -->
                <div id="definisi" class="content-section p-6">
                    <h2 class="text-2xl font-bold mb-4">Definisi Blind Spot</h2>
                    <div class="prose max-w-none">
                        <div class="space-y-6">
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h3 class="font-semibold mb-2">Apa itu Blind Spot?</h3>
                                <p>Blind spot adalah area di sekitar kendaraan yang tidak dapat dilihat oleh pengendara, baik melalui pandangan langsung maupun melalui kaca spion. Area ini sangat penting untuk diperhatikan karena dapat menyebabkan kecelakaan jika tidak dikelola dengan baik.</p>
                            </div>

                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h3 class="font-semibold mb-2">Mengapa Blind Spot Berbahaya?</h3>
                                <ul class="list-disc pl-6">
                                    <li>Dapat menyembunyikan kendaraan lain</li>
                                    <li>Menyulitkan pengendara saat bermanuver</li>
                                    <li>Meningkatkan risiko tabrakan</li>
                                    <li>Membuat pengendara tidak dapat melihat pejalan kaki</li>
                                </ul>
                            </div>
                        </div>
<img src="https://images.unsplash.com/photo-1494905998402-395d579af36f?auto=format&fit=crop&w=1000" alt="Blind Spot Illustration" class="w-full rounded-lg mt-4">
                    </div>
                </div>

                <!-- Area Blind Spot Section -->
                <div id="area" class="content-section p-6">
                    <h2 class="text-2xl font-bold mb-4">Area Blind Spot</h2>
                    <div class="prose max-w-none">
                        <div class="space-y-6">
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h3 class="font-semibold mb-2">Lokasi Umum Blind Spot</h3>
                                <ul class="list-disc pl-6">
                                    <li>Sisi kanan dan kiri belakang kendaraan</li>
                                    <li>Area tepat di belakang kendaraan</li>
                                    <li>Sudut depan kendaraan (pilar A)</li>
                                    <li>Area di bawah spion</li>
                                </ul>
                            </div>

                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h3 class="font-semibold mb-2">Situasi Kritis Blind Spot</h3>
                                <ul class="list-disc pl-6">
                                    <li>Saat pindah jalur</li>
                                    <li>Ketika berbelok</li>
                                    <li>Saat mundur</li>
                                    <li>Di persimpangan</li>
                                </ul>
                            </div>
                        </div>
<img src="https://images.unsplash.com/photo-1549317661-bd32c8ce0db2?auto=format&fit=crop&w=1000" alt="Blind Spot Areas" class="w-full rounded-lg mt-4">
                    </div>
                </div>

                <!-- Teknik Mengatasi Section -->
                <div id="teknik" class="content-section p-6">
                    <h2 class="text-2xl font-bold mb-4">Teknik Mengatasi Blind Spot</h2>
                    <div class="prose max-w-none">
                        <div class="space-y-6">
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h3 class="font-semibold mb-2">Pengaturan Spion</h3>
                                <ul class="list-disc pl-6">
                                    <li>Atur spion dengan benar sebelum berkendara</li>
                                    <li>Pastikan area maksimal terlihat</li>
                                    <li>Periksa kondisi spion secara berkala</li>
                                    <li>Gunakan spion cembung untuk area pandang lebih luas</li>
                                </ul>
                            </div>

                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h3 class="font-semibold mb-2">Teknik Melihat</h3>
                                <ol class="list-decimal pl-6">
                                    <li>Lakukan shoulder check (menoleh ke belakang)</li>
                                    <li>Periksa spion secara berkala</li>
                                    <li>Perhatikan pergerakan kendaraan lain</li>
                                    <li>Jaga jarak aman dengan kendaraan lain</li>
                                </ol>
                            </div>

                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h3 class="font-semibold mb-2">Tips Tambahan</h3>
                                <ul class="list-disc pl-6">
                                    <li>Gunakan lampu sein saat akan berpindah jalur</li>
                                    <li>Kurangi kecepatan saat kondisi tidak ideal</li>
                                    <li>Waspadai kendaraan di sekitar</li>
                                    <li>Hindari berada di blind spot kendaraan lain</li>
                                </ul>
                            </div>
                        </div>
<img src="https://images.unsplash.com/photo-1597962898545-2a6c38900c76?auto=format&fit=crop&w=1000" alt="Handling Blind Spots" class="w-full rounded-lg mt-4">
                    </div>
                </div>

                <!-- Quiz Section -->
                <div id="quiz" class="hidden p-6 bg-gray-50">
                    <h2 class="text-2xl font-bold mb-4">Kuis Pemahaman</h2>
                    <form id="quizForm" class="space-y-6">
                        <!-- Question 1 -->
                        <div class="bg-white p-4 rounded-lg shadow">
                            <p class="font-medium mb-4">1. Apa yang dimaksud dengan blind spot?</p>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="radio" name="q1" value="a" class="mr-2">
                                    <span>Area yang selalu terlihat di spion</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q1" value="b" class="mr-2">
                                    <span>Area yang tidak dapat dilihat pengendara</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q1" value="c" class="mr-2">
                                    <span>Area di depan kendaraan</span>
                                </label>
                            </div>
                        </div>

                        <!-- Question 2 -->
                        <div class="bg-white p-4 rounded-lg shadow">
                            <p class="font-medium mb-4">2. Apa yang harus dilakukan untuk mengatasi blind spot?</p>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="radio" name="q2" value="a" class="mr-2">
                                    <span>Mengabaikan spion</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q2" value="b" class="mr-2">
                                    <span>Hanya melihat ke depan</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q2" value="c" class="mr-2">
                                    <span>Melakukan shoulder check dan menggunakan spion</span>
                                </label>
                            </div>
                        </div>

                        <!-- Question 3 -->
                        <div class="bg-white p-4 rounded-lg shadow">
                            <p class="font-medium mb-4">3. Kapan blind spot paling berbahaya?</p>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="radio" name="q3" value="a" class="mr-2">
                                    <span>Saat parkir</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q3" value="b" class="mr-2">
                                    <span>Saat pindah jalur dan berbelok</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="q3" value="c" class="mr-2">
                                    <span>Saat berhenti di lampu merah</span>
                                </label>
                            </div>
                        </div>

                        <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                            Submit Jawaban
                        </button>
                    </form>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="flex justify-between mt-6">
                <button id="prevBtn" onclick="navigate('prev')" class="bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700">
                    <i class="fas fa-arrow-left mr-2"></i>Sebelumnya
                </button>
                <button id="nextBtn" onclick="navigate('next')" class="bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700">
                    Selanjutnya<i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </main>
    </div>

    <script>
        let currentSection = 'definisi';
        const sections = ['definisi', 'area', 'teknik', 'quiz'];
        
        function updateProgress() {
            const currentIndex = sections.indexOf(currentSection);
            const progress = (currentIndex / (sections.length - 1)) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('progressText').textContent = `${Math.round(progress)}%`;
        }

        function showSection(section) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(el => {
                el.classList.remove('active');
            });
            
            // Show selected section
            if (section === 'quiz') {
                document.getElementById('quiz').classList.remove('hidden');
            } else {
                document.getElementById(section).classList.add('active');
                document.getElementById('quiz').classList.add('hidden');
            }
            
            // Update active tab
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('border-blue-600', 'text-blue-600');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            currentSection = section;
            updateProgress();
            updateNavButtons();
        }

        function navigate(direction) {
            const currentIndex = sections.indexOf(currentSection);
            let nextIndex;
            
            if (direction === 'next') {
                nextIndex = currentIndex + 1;
            } else {
                nextIndex = currentIndex - 1;
            }
            
            if (nextIndex >= 0 && nextIndex < sections.length) {
                showSection(sections[nextIndex]);
            }
        }

        function updateNavButtons() {
            const currentIndex = sections.indexOf(currentSection);
            document.getElementById('prevBtn').style.visibility = currentIndex === 0 ? 'hidden' : 'visible';
            document.getElementById('nextBtn').style.visibility = currentIndex === sections.length - 1 ? 'hidden' : 'visible';
        }

        // Quiz handling
        document.getElementById('quizForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const answers = {
                q1: 'b', // Area yang tidak dapat dilihat pengendara
                q2: 'c', // Melakukan shoulder check dan menggunakan spion
                q3: 'b'  // Saat pindah jalur dan berbelok
            };
            
            let score = 0;
            let total = Object.keys(answers).length;
            
            for (let question in answers) {
                const selected = document.querySelector(`input[name="${question}"]:checked`);
                if (selected && selected.value === answers[question]) {
                    score++;
                }
            }
            
            const percentage = (score / total) * 100;
            
            // Save progress
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (currentUser) {
                currentUser.progress.modules.blindspot = {
                    completed: true,
                    score: percentage
                };
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                // Update users array
                const users = JSON.parse(localStorage.getItem('users'));
                const userIndex = users.findIndex(u => u.npk === currentUser.npk);
                if (userIndex !== -1) {
                    users[userIndex] = currentUser;
                    localStorage.setItem('users', JSON.stringify(users));
                }
            }
            
            // Show result and redirect to dashboard
            alert(`Nilai Anda: ${percentage}%\nModul telah selesai!`);
            window.location.href = 'dashboard.html';
        });

        // Initialize
        showSection('definisi');
    </script>

    <script src="auth.js"></script>
</body>
</html>
